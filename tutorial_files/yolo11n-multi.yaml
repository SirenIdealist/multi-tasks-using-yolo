# Ultralytics ğŸš€ AGPL-3.0 License
# Multi-task YOLO11 model with detection, segmentation, and pose estimation
# This is an example configuration for MultiModel class

# Parameters
nc: 80  # number of classes for detection and segmentation
kpt_shape: [17, 3]  # keypoints shape for pose estimation (17 keypoints, each with x,y,visibility)
channels: 3  # input channels (RGB)
scales: # model compound scaling constants
  # [depth, width, max_channels]
  n: [0.50, 0.25, 1024] # nano version
  s: [0.50, 0.50, 1024] # small version
  m: [0.50, 1.00, 512]  # medium version
  l: [1.00, 1.00, 512]  # large version
  x: [1.00, 1.50, 512]  # extra large version

# YOLO11 backbone (ç‰¹å¾æå–å™¨)
backbone:
  # [from, repeats, module, args]
  # from: è¾“å…¥æ¥è‡ªå“ªä¸€å±‚ (-1è¡¨ç¤ºå‰ä¸€å±‚)
  # repeats: é‡å¤æ¬¡æ•°
  # module: ä½¿ç”¨çš„æ¨¡å—ç±»å‹
  # args: æ¨¡å—å‚æ•° [è¾“å‡ºé€šé“æ•°, å·ç§¯æ ¸å¤§å°, æ­¥é•¿]
  
  - [-1, 1, Conv, [64, 3, 2]]      # 0-P1/2: è¾“å…¥â†’64é€šé“ï¼Œ3Ã—3å·ç§¯ï¼Œæ­¥é•¿2
  - [-1, 1, Conv, [128, 3, 2]]     # 1-P2/4: 64â†’128é€šé“ï¼Œ3Ã—3å·ç§¯ï¼Œæ­¥é•¿2
  - [-1, 2, C3k2, [256, False, 0.25]]  # 2: 128â†’256é€šé“ï¼ŒC3k2æ¨¡å—é‡å¤2æ¬¡
  - [-1, 1, Conv, [256, 3, 2]]     # 3-P3/8: 256â†’256é€šé“ï¼Œ3Ã—3å·ç§¯ï¼Œæ­¥é•¿2
  - [-1, 2, C3k2, [512, False, 0.25]]  # 4: 256â†’512é€šé“ï¼ŒC3k2æ¨¡å—é‡å¤2æ¬¡
  - [-1, 1, Conv, [512, 3, 2]]     # 5-P4/16: 512â†’512é€šé“ï¼Œ3Ã—3å·ç§¯ï¼Œæ­¥é•¿2
  - [-1, 2, C3k2, [512, True]]     # 6: 512â†’512é€šé“ï¼ŒC3k2æ¨¡å—é‡å¤2æ¬¡
  - [-1, 1, Conv, [1024, 3, 2]]    # 7-P5/32: 512â†’1024é€šé“ï¼Œ3Ã—3å·ç§¯ï¼Œæ­¥é•¿2
  - [-1, 2, C3k2, [1024, True]]    # 8: 1024â†’1024é€šé“ï¼ŒC3k2æ¨¡å—é‡å¤2æ¬¡
  - [-1, 1, SPPF, [1024, 5]]       # 9: ç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼Œæ ¸å¤§å°5
  - [-1, 2, C2PSA, [1024]]         # 10: ä½ç½®è‡ªæ³¨æ„åŠ›æ¨¡å—ï¼Œé‡å¤2æ¬¡

# Multi-task head (å¤šä»»åŠ¡å¤´éƒ¨)
head:
  # Neckéƒ¨åˆ†ï¼šç‰¹å¾èåˆç½‘ç»œ (FPN-like structure)
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]  # 11: ä¸Šé‡‡æ ·2å€
  - [[-1, 6], 1, Concat, [1]]       # 12: è¿æ¥ç¬¬11å±‚å’Œç¬¬6å±‚ (P4)
  - [-1, 2, C3k2, [512, False]]     # 13: èåˆç‰¹å¾ï¼Œè¾“å‡º512é€šé“
  
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]  # 14: å†æ¬¡ä¸Šé‡‡æ ·2å€
  - [[-1, 4], 1, Concat, [1]]       # 15: è¿æ¥ç¬¬14å±‚å’Œç¬¬4å±‚ (P3)
  - [-1, 2, C3k2, [256, False]]     # 16: èåˆç‰¹å¾ï¼Œè¾“å‡º256é€šé“ (P3/8-small)

  - [-1, 1, Conv, [256, 3, 2]]      # 17: ä¸‹é‡‡æ ·
  - [[-1, 13], 1, Concat, [1]]      # 18: è¿æ¥ç¬¬17å±‚å’Œç¬¬13å±‚
  - [-1, 2, C3k2, [512, False]]     # 19: èåˆç‰¹å¾ï¼Œè¾“å‡º512é€šé“ (P4/16-medium)

  - [-1, 1, Conv, [512, 3, 2]]      # 20: ä¸‹é‡‡æ ·
  - [[-1, 10], 1, Concat, [1]]      # 21: è¿æ¥ç¬¬20å±‚å’Œç¬¬10å±‚
  - [-1, 2, C3k2, [1024, True]]     # 22: èåˆç‰¹å¾ï¼Œè¾“å‡º1024é€šé“ (P5/32-large)

  # Multi-task heads: å¤šä¸ªä»»åŠ¡å¤´
  - [[16, 19, 22], 1, Detect, [nc]]          # 23: æ£€æµ‹å¤´ (P3, P4, P5)
  - [[16, 19, 22], 1, Segment, [nc, 32, 256]] # 24: åˆ†å‰²å¤´ (P3, P4, P5)
  - [[16, 19, 22], 1, Pose, [nc, kpt_shape]]  # 25: å§¿æ€ä¼°è®¡å¤´ (P3, P4, P5)
